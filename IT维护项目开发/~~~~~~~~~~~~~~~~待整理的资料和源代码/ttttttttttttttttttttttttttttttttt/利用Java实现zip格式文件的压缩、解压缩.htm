<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0051)http://asp.7i24.com/sg/tech/software/2000.10.20.htm -->
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META 
content="经济; IT产业; 金融; 投资; 经营; 技术; 网络; 软件开发; 安全技术; 站点制作; 免费; free; internet; wwwboard; headlines; downloads; news; Web site; what's new; solutions; services; software; contests; corporate news;" 
name=KEYWORDS>
<META content=网妹中国资讯网 name=description>
<STYLE type=text/css>BODY {
	FONT-SIZE: 9pt; COLOR: #000000; FONT-FAMILY: 宋体
}
.pt9 {
	FONT-SIZE: 9pt; FONT-FAMILY: "宋体"
}
.pt11 {
	FONT-WEIGHT: bold; FONT-SIZE: 11pt; COLOR: #336699; FONT-FAMILY: "宋体"
}
TT {
	FONT-WEIGHT: bold; FONT-SIZE: 10.5pt; COLOR: #000000; FONT-FAMILY: "宋体"
}
H5 {
	FONT-WEIGHT: bold; FONT-SIZE: 12pt; COLOR: #000000; FONT-FAMILY: "宋体"
}
P {
	FONT-SIZE: 9pt; COLOR: #000000; FONT-FAMILY: "宋体"
}
H9 {
	FONT-SIZE: 9pt; FONT-FAMILY: "宋体"
}
TD {
	FONT-SIZE: 9pt; FONT-FAMILY: "宋体"
}
SELECT {
	FONT-SIZE: 9pt; FONT-FAMILY: "宋体"
}
A:link {
	FONT-SIZE: 9pt; COLOR: #0022aa; FONT-FAMILY: "宋体"; TEXT-DECORATION: none
}
A:visited {
	FONT-SIZE: 9pt; COLOR: #0022aa; FONT-FAMILY: "宋体"; TEXT-DECORATION: none; font-color: blue
}
A:hover {
	FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: "宋体"; TEXT-DECORATION: underline
}
</STYLE>

<STYLE type=text/css>.d {
	LINE-HEIGHT: 12pt; MARGIN-RIGHT: 15px; TEXT-ALIGN: justify
}
</STYLE>

<SCRIPT language=JavaScript src="利用Java实现zip格式文件的压缩、解压缩.files/hermes.js" 
1.1></SCRIPT>

<META content="MSHTML 5.50.4134.100" name=GENERATOR></HEAD>
<BODY bgColor=#ffffff leftMargin=0 topMargin=0 MARGINWIDTH="0" 
MARGINHEIGHT="0"><A name=index></A>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="17%" height=650>
      <TABLE height="100%" cellSpacing=0 cellPadding=0 width="100%" align=left 
      border=0 valign="top">
        <TBODY>
        <TR>
          <TD vAlign=top align=middle bgColor=#ffe4b5>
            <TABLE height=80 cellSpacing=0 cellPadding=0 width="90%" 
            align=center border=0 valign="top">
              <TBODY>
              <TR>
                <TD align=middle><IMG 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/logo.gif"></TD></TR>
              <TR>
                <TD align=middle><FONT size=2><A 
                  href="http://www.hermes.com.cn/">http://www.hermes.com.cn/</A></FONT></TD></TR>
              <TR>
                <TD vAlign=top align=middle width="100%" bgColor=#ffe4b5><IMG 
                  height=18 alt=海脉技术纵横 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/jishu.gif" width=120 
                  border=0></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/techinfo/index.htm">&nbsp;<H9>技术动态</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/network/index.htm">&nbsp;<H9>网络技术</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/software/index.htm">&nbsp;<H9>软件开发</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/security/index.htm">&nbsp;<H9>安全技术</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/pagemake/index.htm">&nbsp;<H9>站点制作</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR>
              <TR>
                <TD vAlign=top width="100%" bgColor=#ffcf80 height=10><FONT 
                  color=#e0611e>◆</FONT><A target=rightdown 
                  href="http://asp.7i24.com/sg/tech/faq/index.htm">&nbsp;<H9>技术问答</H9></A></TD></TR>
              <TR>
                <TD vAlign=top align=left width="100%" bgColor=#ffe4b5 
                  height=2><IMG height=2 
                  src="利用Java实现zip格式文件的压缩、解压缩.files/blank.gif"></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><!-- 左MENU代码结束  //--></TD>
    <TD vAlign=top align=left width="83%" height=650>
      <TABLE height=70 cellSpacing=0 cellPadding=2 width="100%" bgColor=#ffffff 
      border=0>
        <TBODY>
        <TR>
          <TD vAlign=BUTTOM align=left width="70%" bgColor=#ffffff 
            height=60><IFRAME marginWidth=0 marginHeight=0 
            src="利用Java实现zip格式文件的压缩、解压缩.files/iframe.htm" frameBorder=0 
            width=468 scrolling=no 
            height=60> <a href="http://ad.hermes.com.cn/clickbanner.php?member=hermes"><img width="468" height="60" border="0" src="http://ad.hermes.com.cn/banner.php?size=0&member=hermes"></a></IFRAME><BR>
            <CENTER><A target=_blank 
            href="http://www.healliance.com/"></A></CENTER></TD>
          <TD vAlign=BUTTOM align=left width="30%" bgColor=#ffffff 
            height=60>&nbsp; </TD></TR></TBODY></TABLE>
      <TABLE height=500 cellSpacing=0 cellPadding=0 width="100%" bgColor=#ffffff 
      border=0>
        <TBODY>
        <TR>
          <TD vAlign=center align=left width="80%" bgColor=#ffe4b5 
            height=10>&nbsp;&nbsp;目前位置:<A 
            href="http://asp.7i24.com/sg/tech/rightnew.html">首页</A>&gt;&gt;软件开发 
          </TD>
          <TD vAlign=center align=middle width="20%" bgColor=#ececec 
            height=10>2000.10.20 </TD></TR>
        <TR>
          <TD vAlign=buttom align=middle width="100%" bgColor=#ffffff colSpan=2 
          height=430><!-- 添加内容开始  //-->
            <TABLE cellPadding=10 width="100%" border=0>
              <TBODY>
              <TR>
                <TD height=2>
                  <DIV align=left><BIG><B>软件开发</B></BIG> 
                  <H3>
                  <CENTER>利用Java实现zip格式文件的压缩/ 
                  解压缩</CENTER></H3>　　由于网络带宽是有限的，所以数据文件的压缩有利于数据在Internet 
                  上的快速传输，同时也节省服务器的外存空间。Java 实现了I/O 
                  数据流与网络数据流的单一接口，因此数据的压缩、网络传输和解压缩的实现比较容易，下面介绍利用ZipEntry、ZipInputStream和ZipOutputStream 
                  三个Java 类实现zip 数据压缩方式的编程方法。<BR><BR>zip 压缩文件结构：一个zip 文件由多个entry 
                  组成，每个entry 有一个唯一的名称，entry 的数据项存储着压缩数据。<BR><BR><XMP>    zip 文件有关的几个java 类

　　类ZipEntry 

    public ZipEntry(String name)；name 为指定的数据项名。

    类ZipOutputStream 

    ZipOutputStream 实现了zip 压缩文件的写输出流，支持压缩和非压缩entry。下面列出了它的几个函数：
public ZipOutputStream(OutputStream out)；// 利用输出流out 构造一个ZIP 输出流。public void 
setMethod(int method);// 设置entry 压缩方法，缺省值为DEFLATED。

    public void putNextEntry(ZipEntry newe);// 如果当前的entry 存在且处于激活状态时，关闭它，在
zip 文件中写入新的entry-newe, 并将数据流定位于entry数据项的起始位置，压缩方法为setMethod 指定的方
法。

　　类ZipInputStream \

    ZipInputStream 实现了zip 压缩文件的读输入流，支持压缩和非压缩entry。下面列出了它的几个函数：

         public ZipInputStream(InputStream in)；// 利用输入流in 构造一个ZIP 输出流。

         public ZipEntry getNextEntry()；// 返回ZIP 文件中的下一个entry, 并将输出流定位在此entry
数据项的起始位置。

         public void closeEntry()；// 关闭当前的zip entry，并将数据流定位于下一个entry 的起始位置。
</XMP>　　一个例程：<BR><BR>下列的程序实现了数据文件zip 方式的压缩和解压缩方法。randomData() 
                  函数随机生成50 个double 数据，并放在doc 字符串变量中；openFile() 函数读取ZIP 
                  压缩文件；saveFile() 函数将随机生成的数据存到ZIP 格式的压缩文件中。<BR><BR><XMP>import java.util.zip.*;
import java.awt.event.*;
import java.awt.*;
import java.lang.Math;
import java.io.*;

public class TestZip extends Frame
           implements ActionListener {
TextArea textarea; //
                 显示数据文件的多行文本显示域
TextField infotip; //
        显示数据文件未压缩大小及压缩大小单行文本显示域
String doc; //存储随机生成的数据
long doczipsize = 0;//压缩数据文件的大小

public TestZip(){
//生成菜单
	MenuBar menubar = new MenuBar();
	setMenuBar(menubar);
	Menu file = new Menu("File",true);
	menubar.add(file);
	MenuItem neww= new MenuItem("New");
	neww.addActionListener(this);
	file.add(neww);
	MenuItem open=new MenuItem("Open");
	open.addActionListener(this);
	file.add(open);
	MenuItem save=new MenuItem("Save");
	save.addActionListener(this);
	file.add(save);
	MenuItem exit=new MenuItem("Exit");
	exit.addActionListener(this);
	file.add(exit);

//随机生成的数据文件的多行文本显示域
	add("Center",textarea =new TextArea());
//提示文本原始大小、压缩大小的单行文本显示域
	add("South",infotip =new TextField());
}

public static void main(String args[]) {
	TestZip ok=new TestZip();
	ok.setTitle("zip sample");
	ok.setSize(600,300);
	ok.show();
}

private void randomData()
       {//随机生成50个double数据，并放在doc字符串变量中。
doc="";
for(int i=1;i<51;i++){
	double rdm=Math.random()*10;
	doc=doc+new Double(rdm).toString();
	if(i%5 == 0)	doc=doc+"\n";
	else doc=doc+" ";
}
	doczipsize = 0;
showTextandInfo();
}

private void openFile()
          {//打开zip文件，将文件内容读入doc字符串变量中。
	FileDialog dlg=new FileDialog(this,"Open",FileDialog.LOAD);
	dlg.show();
	String filename=dlg.getDirectory()+dlg.getFile();
	try{
	//创建一个文件实例
	File f=new File(filename);
	if(!f.exists()) return; //文件不存在，则返回

	//用文件输入流构建ZIP压缩输入流
	ZipInputStream zipis=new 
          ZipInputStream(new FileInputStream(f));
	zipis.getNextEntry();//将输入流定位在当前entry数据项位置
	DataInputStream dis=new DataInputStream(zipis);
                 //用ZIP输入流构建DataInputStream
	doc=dis.readUTF();//读取文件内容
	dis.close();//关闭文件
	doczipsize = f.length();//获取ZIP文件长度
	showTextandInfo();//显示数据
	}
	catch(IOException ioe){
	System.out.println(ioe);
 }
}

private void saveFile()
        {//打开zip文件，将doc字符串变量写入zip文件中。
FileDialog dlg=new FileDialog(this,"Save",FileDialog.SAVE);
	dlg.show();
	String filename=dlg.getDirectory()+dlg.getFile();
	try{
	//创建一个文件实例
	File f=new File(filename);
	if(!f.exists()) return; //文件不存在，则返回
	//用文件输出流构建ZIP压缩输出流
	ZipOutputStream zipos=new 
           ZipOutputStream(new FileOutputStream(f));
	zipos.setMethod(ZipOutputStream.DEFLATED); 
                   //设置压缩方法
	zipos.putNextEntry(new ZipEntry("zip"));//生成一个ZIP entry，
            写入文件输出流中，并将输出流定位于entry起始处。
	DataOutputStream os=new DataOutputStream(zipos);
               //用ZIP输出流构建DataOutputStream；
	os.writeUTF(doc);//将随机生成的数据写入文件中
	os.close();//关闭数据流
	doczipsize = f.length();//获取压缩文件的长度
	showTextandInfo();//显示数据
	 }
	 catch(IOException ioe){
	System.out.println(ioe);
	 }
}

private void showTextandInfo()
        {//显示数据文件和压缩信息
	textarea.replaceRange(doc,0,textarea.getText().length());
	infotip.setText("uncompessed size: "+doc.length()
			+" compressed size: "+doczipsize);
}

public void actionPerformed(ActionEvent e){//
String arg = e.getActionCommand();
if ("New".equals(arg)) randomData();
else if ("Open".equals(arg)) openFile();
else if ("Save".equals(arg)) saveFile();
else if ("Exit".equals(arg)){
 dispose();//关闭窗口
 System.exit(0);//关闭程序
}
else{System.out.println("no this command!");}
}
}
</XMP></DIV></TD></TR></TBODY></TABLE><!-- 添加内容结束  //--></TD></TR>
        <TR>
          <TD vAlign=buttom align=middle width="100%" bgColor=#ffffff colSpan=2 
          height=10>|<A 
            href="http://asp.7i24.com/sg/tech/software/2000.10.20.htm#index">回顶部</A>|<A 
            href="javascript:(history.go(-1))">上一页</A>|<A 
            href="http://asp.7i24.com/index.html">主页面</A>| </TD></TR>
        <TR>
          <TD vAlign=buttom align=middle width="100%" bgColor=#ffffff colSpan=2 
          height=30>
            <P align=center>
            <HR color=#0066cc SIZE=1>
            <BR>建议使用800*600的分辩率，IE4以上的浏览器浏览以取得良好的效果 <BR>Copyright (C) 2001-2002 
            Netmay.Com All Rights Reserved<BR>Email: <A 
            href="mailto:skyidea@hotmail.com">skyidea@hotmail.com</A> 
            QQ:83150<BR></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></BODY></HTML>
